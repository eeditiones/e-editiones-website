{
    "format": "json",
    "view": "div",
    "doc": "documentation.xml",
    "root": "3.28.11",
    "rootNode": "3.28.11",
    "id": "upgrade-910",
    "odd": "docbook.odd",
    "next": "3.28.13",
    "previous": "3.28",
    "nextId": "upgrade-810",
    "previousId": "updating",
    "switchView": null,
    "content": "<!DOCTYPE html><html><head></head><body><div class=\"content \"><div class=\"tei-section4\" id=\"upgrade-910\"><pb-observable data=\"3.28.11,3.28.11\" emit=\"transcription\">\n      <h2 class=\"tei-title7 title\">Upgrading from TEI Publisher 9.0 to 9.1</h2>\n      <p class=\"tei-para\">This bug fix release is mainly relevant for Windows users running eXist-db directly (i.e. not via docker). The biggest change is the upgrade of\n        <span class=\"tei-emphasis2\">tei-publisher-lib</span>: version 4.0.0 of the library introduced the possibility to directly reference variables and functions defined in TEI Publisher's main\n        configuration module (<span class=\"tei-filename code\">modules/config.xqm</span>). While this is unproblematic in most environments, it causes a silent failure in windows\n        when compiling an ODD. The underlying reason is that <span class=\"tei-filename code\">config.xqm</span> itself imports a large number of other modules, leading to\n        recursive imports, which eXist-db is currently unable to resolve properly on Windows. </p>\n      <p class=\"tei-para\">In general, importing all of <span class=\"tei-filename code\">config.xqm</span> into the ODD generated code\n        is usually unnecessary as most of the settings are not needed. Version 4.0.1 of\n          <span class=\"tei-emphasis2\">tei-publisher-lib</span> therefore no longer imports\n          <span class=\"tei-filename code\">config.xqm</span> by default. Instead, you can configure the modules to be\n        made available via <span class=\"tei-filename code\">odd/configuration.xml</span> (or\n          <span class=\"tei-filename code\">resources/odd/configuration.xml</span>). By default, TEI Publisher 9.1\n        imports the dedicated <span class=\"tei-filename code\">modules/odd-global.xqm</span>. </p>\n      <p class=\"tei-para\">To preserve backwards compatibility with apps generated by TEI Publisher 9.0,\n        tei-publisher-lib 4.0.1 will still import the entire config.xqm if no other module is\n        configured to be imported. However, to avoid unnecessary overhead, we strongly recommend to\n        switch to an explicit import as described below.</p>\n      <p class=\"tei-para\">To update follow the generic instructions above and register the dedicated configuration\n        module:</p> \n      <ol class=\"tei-orderedlist\"><li class=\"tei-listitem\">\n          <p class=\"tei-para\">If your ODD was using <span class=\"tei-parameter code\">$global</span> anywhere, copy <span class=\"tei-filename code\">modules/odd-global.xqm</span> from TEI Publisher 9.1 into the corresponding location of your app. Open the\n            module to check if the settings still match your custom application (e.g. if <span class=\"tei-parameter code\">data-root</span> is correct).</p>\n        </li><li class=\"tei-listitem\">\n          <p class=\"tei-para\">Change your <span class=\"tei-filename code\">resources/odd/configuration.xml</span> to include the module declaration:</p>\n          <pb-code-highlight class=\"tei-programlisting5\" language=\"xml\">&lt;modules&gt;\n    &lt;!-- Import global variables and functions from modules/odd-global.xqm --&gt;\n    &lt;module uri=\"http://e-editiones.org/tei-publisher/odd-global\" prefix=\"global\" at=\"odd-global.xqm\"/&gt;\n    ...\n&lt;/modules&gt;</pb-code-highlight>\n        </li></ol>\n    </pb-observable></div></div></body></html>",
    "footnotes": "",
    "userParams": {
        "webcomponents": 7
    },
    "collection": "doc"
}