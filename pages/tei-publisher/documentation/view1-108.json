{
    "format": "json",
    "view": "div",
    "doc": "documentation.xml",
    "root": "3.28.17.19",
    "rootNode": "3.28.17.19",
    "id": "updating-templates",
    "odd": "docbook.odd",
    "next": "3.28.17.21",
    "previous": "3.28.17.17",
    "nextId": "updating-config",
    "previousId": "updating-copy",
    "switchView": null,
    "content": "<!DOCTYPE html><html><head></head><body><div class=\"content \"><div class=\"tei-section4\" id=\"updating-templates\"><pb-observable data=\"3.28.17.19,3.28.17.19\" emit=\"transcription\">\n        <h3 class=\"tei-title7 title\">Edit HTML templates</h3>\n        <div class=\"tei-note3 note\"><h4 class=\"tei-title4\">Important</h4><p class=\"tei-para\"> TEI Publisher 7 expects all HTML files to reside in the\n              <span class=\"tei-filename code\">templates</span> subfolder. Previous versions used a mix of locations\n            with some HTML files in the root of the app. You should thus copy your\n              <span class=\"tei-filename code\">index.html</span>, <span class=\"tei-filename code\"> search.html</span>,\n              <span class=\"tei-filename code\">error-page.html</span> and any other custom HTML files into\n              <span class=\"tei-filename code\">templates</span> first. </p></div>\n        <p class=\"tei-para\"> Also, because TEI Publisher 7 has a well-defined API to handle the communication\n          between user interface components and server-side functionality, we need to change some of\n          the URLs in the HTML templates we're using. As a rule of thumb, all URLs previously\n          calling XQuery modules directly, should now start with <span class=\"tei-code2 code\">api/</span> followed by the\n          correct API path. The main HTML template to be changed is <span class=\"tei-filename code\">index.html</span>\n          . Please search and replace the properties for the following webcomponents: </p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-download url=\"modules/lib/app-download.xql\"&gt;</pb-code-highlight>\n        <p class=\"tei-para\">should be changed into</p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-download url=\"api/apps/download\"&gt;</pb-code-highlight>\n        <p class=\"tei-para\">and</p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-custom-form id=\"facets\" url=\"modules/facets.xql\" event=\"pb-results-received\" subscribe=\"docs\" emit=\"docs\"/&gt;\n&lt;pb-browse-docs id=\"document-list\" url=\"collection/\" ...&gt;</pb-code-highlight>\n        <p class=\"tei-para\">should be changed into</p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-custom-form id=\"facets\" url=\"api/search/facets\" event=\"pb-results-received\" subscribe=\"docs\" emit=\"docs\"&gt;&lt;/pb-custom-form&gt;\n&lt;pb-browse-docs id=\"document-list\" url=\"api/collection/\" ...&gt;</pb-code-highlight>\n        <p class=\"tei-para\"> The last change should also be applied to <span class=\"tei-filename code\">search.html</span> and you\n          should change the <span class=\"tei-tag code\">pb-load</span> loading the search results to read: </p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-load id=\"results\" url=\"api/search\" emit=\"results\"&gt;&lt;/pb-load&gt;</pb-code-highlight>\n        <p class=\"tei-para\"> Also check <span class=\"tei-filename code\">templates/pages/view.html</span> and any other page template\n          your app uses. Search for calls to <span class=\"tei-filename code\">.xql</span> or\n            <span class=\"tei-filename code\">modules/</span> and replace them with appropriate API paths. If you were\n          making direct calls to custom modules, e.g. from <span class=\"tei-code2 code\">pb-load</span> component, these\n          need to be added as <pb-link class=\"tei-link3\" uri=\"?odd=docbook.odd&amp;view=div&amp;id=customizations6-7\" xml-id=\"customizations6-7\" emit=\"transcription\">custom API endpoints</pb-link>. </p>\n      </pb-observable></div></div></body></html>",
    "footnotes": "",
    "userParams": {
        "webcomponents": 7
    },
    "collection": "doc"
}