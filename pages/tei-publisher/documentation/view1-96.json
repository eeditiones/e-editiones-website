{
    "format": "json",
    "view": "div",
    "doc": "documentation.xml",
    "root": "3.25.11.17",
    "rootNode": "3.25.11.17",
    "id": "updating-templates",
    "odd": "docbook.odd",
    "next": "3.25.11.19",
    "previous": "3.25.11.15",
    "nextId": "updating-config",
    "previousId": "updating-copy",
    "switchView": null,
    "content": "<!DOCTYPE html><html><head></head><body><div class=\"content \"><div class=\"tei-section3\" id=\"updating-templates\"><pb-observable data=\"3.25.11.17,3.25.11.17\" emit=\"transcription\">\n        <h3 class=\"tei-title6 title\">Edit HTML templates</h3>\n        <div class=\"tei-note3 note\"><h4 class=\"tei-title4\">Important</h4><p class=\"tei-para\">\n            TEI Publisher 7 expects all HTML files to reside in the\n            <span class=\"tei-filename code\">templates</span>\n            subfolder. Previous versions used a mix of locations\n              with some HTML files in the root of the app. You should thus copy your\n            <span class=\"tei-filename code\">index.html</span>\n            ,\n            <span class=\"tei-filename code\">search.html</span>\n            ,\n            <span class=\"tei-filename code\">error-page.html</span>\n            and any other custom HTML files into\n            <span class=\"tei-filename code\">templates</span>\n            first.\n          </p></div>\n        <p class=\"tei-para\">\n          Also, because TEI Publisher 7 has a well-defined API to handle the communication\n            between user interface components and server-side functionality, we need to change some\n            of the URLs in the HTML templates we're using. As a rule of thumb, all URLs previously\n            calling XQuery modules directly, should now start with\n          <span class=\"tei-code2 code\">api/</span>\n          followed by the\n            correct API path. The main HTML template to be changed is\n          <span class=\"tei-filename code\">index.html</span>\n          . Please search and replace the properties for the\n            following webcomponents:\n        </p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-download url=\"modules/lib/app-download.xql\"&gt;</pb-code-highlight>\n        <p class=\"tei-para\">should be changed into</p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-download url=\"api/apps/download\"&gt;</pb-code-highlight>\n        <p class=\"tei-para\">and</p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-custom-form id=\"facets\" url=\"modules/facets.xql\" event=\"pb-results-received\" subscribe=\"docs\" emit=\"docs\"/&gt;\n&lt;pb-browse-docs id=\"document-list\" url=\"collection/\" ...&gt;</pb-code-highlight>\n        <p class=\"tei-para\">should be changed into</p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-custom-form id=\"facets\" url=\"api/search/facets\" event=\"pb-results-received\" subscribe=\"docs\" emit=\"docs\"&gt;&lt;/pb-custom-form&gt;\n&lt;pb-browse-docs id=\"document-list\" url=\"api/collection/\" ...&gt;</pb-code-highlight>\n        <p class=\"tei-para\">\n          The last change should also be applied to\n          <span class=\"tei-filename code\">search.html</span>\n          and you\n            should change the\n          <span class=\"tei-tag code\">pb-load</span>\n          loading the search results to read:\n        </p>\n        <pb-code-highlight class=\"tei-synopsis4\" language=\"xml\">&lt;pb-load id=\"results\" url=\"api/search\" emit=\"results\"&gt;&lt;/pb-load&gt;</pb-code-highlight>\n        <p class=\"tei-para\">\n          Also check\n          <span class=\"tei-filename code\">templates/pages/view.html</span>\n          and any other page\n            template your app uses. Search for calls to\n          <span class=\"tei-filename code\">.xql</span>\n          or\n          <span class=\"tei-filename code\">modules/</span>\n          and replace them with appropriate API paths. If you were\n            making direct calls to custom modules, e.g. from\n          <span class=\"tei-code2 code\">pb-load</span>\n          component, these\n            need to be added as\n          <a href=\"/?odd=docbook.odd&amp;view=div&amp;id=customizations6-7\" class=\"tei-link3\" target=\"\">custom API\n            endpoints</a>\n          .\n        </p>\n      </pb-observable></div></div></body></html>",
    "footnotes": "",
    "userParams": {
        "webcomponents": 7
    },
    "collection": "doc"
}