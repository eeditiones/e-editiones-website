{
    "format": "json",
    "view": "div",
    "doc": "documentation.xml",
    "root": "3.39.14",
    "rootNode": "3.39.14",
    "id": null,
    "odd": "docbook.odd",
    "next": null,
    "previous": "3.39.12",
    "nextId": null,
    "previousId": null,
    "switchView": null,
    "content": "<!DOCTYPE html><html><head></head><body><div class=\"content \"><div class=\"tei-section3\"><pb-observable data=\"3.39.14,3.39.14\" emit=\"transcription\">\n      <h2 class=\"tei-title6 title\">Other Considerations</h2>\n      <p class=\"tei-para\">Web annotations require a clear mapping between the HTML view of the text in the browser and the TEI document in the database. It is thus important to respect the following restrictions:</p>\n      <ol class=\"tei-orderedlist\"><li class=\"tei-listitem\">\n          <p class=\"tei-para\">TEI Publisher's page-by-page display of a text will not work in the annotation editor</p>\n        </li><li class=\"tei-listitem\">\n          <p class=\"tei-para\">Likewise, the <span class=\"tei--element\">fill</span> parameter, which causes TEI Publisher to fill up short fragments with content from nested divs, should be set to 0 for annotation purposes.</p>\n        </li><li class=\"tei-listitem\">\n          <p class=\"tei-para\">The annotation editor can operate on documents with multiple division and will show them one after the other. However, those need to be top-level divisions. Therefore the <span class=\"tei--element\">depth</span> parameter should be set to 1.</p>\n        </li></ol>\n      <p class=\"tei-para\">To ensure this, TEI Publisher sets the following configuration for the annotate collection in <span class=\"tei-filename code\">config.xqm</span>:</p>\n      <pb-code-highlight class=\"tei-programlisting5\" language=\"xquery\" line-numbers=\"line-numbers\">declare function config:collection-config($collection as xs:string?, $docUri as xs:string?) {\n    switch ($collection)\n        (: For annotations we need to overwrite document-specific settings :)\n        case \"annotate\" return\n            map {\n                \"template\": \"annotate.html\",\n                \"overwrite\": true(),\n                \"depth\": 1,\n                \"fill\": 0\n            }\n        default return\n            (: Return empty sequence to use default config :)\n            ()\n};</pb-code-highlight>\n      <p class=\"tei-para\">Generated applications should choose similar settings. If you create a separate app just for annotations, the following function would suffice to impose the right settings for all documents:</p>\n      <pb-code-highlight class=\"tei-programlisting5\" language=\"xquery\" line-numbers=\"line-numbers\">declare function config:collection-config($collection as xs:string?, $docUri as xs:string?) {\n    map {\n        \"template\": \"annotate.html\",\n        \"overwrite\": true(),\n        \"depth\": 1,\n        \"fill\": 0\n    }\n};</pb-code-highlight>\n    </pb-observable></div></div></body></html>",
    "footnotes": "",
    "userParams": {
        "webcomponents": 7
    },
    "collection": "doc"
}